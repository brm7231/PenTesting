#!/bin/bash

# Check if passwords.txt exists, create if it doesn't
if [ ! -f passwords.txt ]; then
  echo "bandit0:bandit0" > passwords.txt
fi

while true; do
	credentials=$(tail -n 1 passwords.txt)
	username=$(echo "$credentials" | cut -d ':' -f 1)
	usernum=$(echo "$username" | grep -oE '[0-9]+')
	password=$(echo "$credentials" | cut -d ':' -f 2)
	
	sshpass -p "$password" ssh -p 2220 "$username"@bandit.labs.overthewire.org
	
	usernum=$((usernum+1))
	username="bandit$usernum"
	
	read -rp "Enter the password for $username (type 'quit' to end): " password
	
	 if [ "$password" = "quit" ]; then
	 	echo "Script ended."
		break
	  fi

	credentials="$username:$password"
	echo "$credentials" >> passwords.txt
done
